<?php

require_once 'PHPUnit/Framework.php';

require_once CLASS_PATH.'/AnnoLoader/Dependency/Type/Directory/Tree.php';
require_once CLASS_PATH.'/AnnoLoader/Dependency/Type/Exception.php';

/**
 * Test class for AnnoLoader_Dependency_Type_Directory_Tree.
 * Generated by PHPUnit on 2011-01-17 at 14:01:58.
 */
class AnnoLoader_Dependency_Type_Directory_TreeTest extends PHPUnit_Framework_TestCase {

	/**
	 * @var AnnoLoader_Dependency_Type_Directory_Tree
	 */
	protected $object;

	/**
	 * Sets up the fixture, for example, opens a network connection.
	 * This method is called before a test is executed.
	 */
	protected function setUp()
	{
		$this->object = new AnnoLoader_Dependency_Type_Directory_Tree;

		$this->object->setFilesList(array
		(
			JS_PATH.'/DependencyTypeDirectory/1.js' => true,
			JS_PATH.'/DependencyTypeDirectory/2.js' => true,
			JS_PATH.'/DependencyTypeDirectory/subdir/4.js' => true,
		));

		$this->object->setBasePath(JS_PATH);
	}

	/**
	 * Tears down the fixture, for example, closes a network connection.
	 * This method is called after a test is executed.
	 */
	protected function tearDown() {

	}

	/**
	 * @covers AnnoLoader_Dependency_Type_Directory_Tree::getFiles
	 */
	public function testGetFiles()
	{
		$dependency = 'DependencyTypeDirectory';
		$this->assertEquals
		(
			array
			(
				JS_PATH.'/DependencyTypeDirectory/1.js',
				JS_PATH.'/DependencyTypeDirectory/2.js',
				JS_PATH.'/DependencyTypeDirectory/subdir/4.js',
			),
			$this->object->getFiles($dependency, 'test')
		);
	}

	/**
	 * @covers AnnoLoader_Dependency_Type_Directory_Tree::getFiles
	 * @expectedException AnnoLoader_Dependency_Type_Exception
	 */
	public function testGetFilesException()
	{
		$dependency = 'nonExistingDir';
		$this->object->getFiles($dependency, 'test');
	}

}

?>
